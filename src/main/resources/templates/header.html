<header id="header" class="header d-flex align-items-center sticky-top">
  <div class="container-fluid container-xl position-relative d-flex align-items-center">
    <a href="/index" class="logo d-flex align-items-center me-auto">
      <img src="assets/img/TT.png" alt="Company Logo">
      <h1 class="sitename">TeachToTech</h1>
    </a>

    <nav id="navmenu" class="navmenu">
      <ul>
        <li><a href="/index" class="active">Home<br></a></li>
        <li class="dropdown">
          <a href="/courses"><span>All Courses</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
          <ul>
            <li th:each="category, iterStat : ${categories}">
              <a th:href="@{/courses?category={category}(category=${category.name})}" th:text="${category.name}" th:if="${iterStat.index < 4}"></a>
            </li>
            <li class="dropdown">
              <a href="#"><span>More Categories</span> <i class="bi bi-chevron-down toggle-dropdown"></i></a>
              <ul>
                <li th:each="category, iterStat : ${categories}">
                  <a th:href="@{/courses?category={category}(category=${category.name})}" th:text="${category.name}" th:if="${iterStat.index >= 4}"></a>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li><a href="/trainers">Team</a></li>
       <li><a href="/articlewriting">Publish Article</a></li>
       <li><a href="/articlereview">Review Article</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/contact">Contact</a></li>
        <li class="adminSection"><a href="/api/users/allusers">All users</a></li>
        <li id="loginButtons">
          <a class="btn-getstarted" href="/api/users/login">Login</a>
          <a class="btn-getstarted" href="/api/users/register">Register</a>
        </li>
        <li id="logoutContainer" style="display: none;">
          <a id="logoutButton" href="/api/users/logout" class="btn-logout">Logout</a>
        </li>

        <li id="userGreeting" style="display: none;">
          <span class="username">Hello, <span id="usernameText"></span></span>
        </li>
        
      </ul>
      <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
    </nav>
  </div>
</header>
<script th:src="@{/assets/js/main.js}"></script>


<!-- <script>
  // Fetch and display username in header
  async function fetchUsername() {
    const token = localStorage.getItem("authToken");
    console.log("Token from localStorage:", token);
    if (!token) {
      return;
    }

    try {
      const response = await fetch("/api/users/name", {
        method: "GET",
        headers: {
          "Authorization": `Bearer ${token}`,
        },
      });
      console.log("Response status:", response.status);
      if (response.ok) {
        const username = await response.text();
        document.getElementById("usernameText").innerText = username;
        document.getElementById("userGreeting").style.display = "inline";
        document.getElementById("loginButtons").style.display = "none";  // Hide login/register buttons
      }
    } catch (error) {
      console.error("Failed to fetch username:", error);
    }
  }

  // Call on page load
  
    fetchUsername();

</script> -->
